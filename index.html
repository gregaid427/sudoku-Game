<html>
  <style>
    .sudoku-container {
      margin: 20px;
      font: 14px sans-serif;
      text-align: center;
    }
    .sudoku-table {
      margin: auto;
      border-collapse: collapse;
      border-left: solid;
      border-top: solid;
    }

    .sudoku-table__row:nth-of-type(3n) {
      border-bottom: solid;
    }

    .sudoku-table__cell {
      padding: 10px;
      border: 1px solid black;
      background-color: #ffffff;
    }
    &:nth-of-type(3n) {
      border-right: solid;
    }

    .sudoku-table__cell--wrong {
      background-color: #ff0000;
    }
  </style>

  <body class="main">
    <div class="sudoku-container"></div>
  </body>
  <script>





    function checkField() {
      let table = [];
      for (let row = 0; row < 9; row++) {
        table.push([]);
        for (let col = 0; col < 9; col++) {
          let val =
            document.querySelector(".sudoku-table").rows[row].cells[col]
              .innerHTML;
          document
            .querySelector(".sudoku-table")
            .rows[row].cells[col].classList.remove("sudoku-table__cell--wrong");
          table[row][col] = val ? parseInt(val) : 0;
        }
      }

      /////////////////////////////////////////////////////////////

      let temparr = [];
      let refarr = [];
      let cup = 0;
      let culst = 0;
      let cul = 0;
      let colstart = 0;

      for (let cul = 0; cul < 9; cul++) {
        for (let colstart = 0; colstart < 1; colstart++) {
          let colend = colstart + 1;

          for (let culst = 0; culst < 9; culst++) {
            let val =
              document.querySelector(".sudoku-table").rows[cul].cells[culst]
                .innerHTML;
            temparr.push(val ? parseInt(val) : 0);
            refarr.push(val ? parseInt(val) : 0);
          }

          console.log(temparr);
          console.log(refarr);

          for (let x = 0; x < 9; x++) {
            console.log("start array" + "" + temparr);

            let select = refarr[x];

            console.log(select);
            let findindex = refarr.indexOf(select);
            temparr.splice(findindex, 1);
            console.log("spliced" + "" + temparr);
            if (temparr.includes(select)) {
              console.log("alarm");
              let rrr = cul + 1;
              // for (let rows = row ; rows < 9 ; rows++) {
              console.log("rowval" + cul);
              for (let colstart = 0; colstart < 9; colstart++) {
                document
                  .querySelector(".sudoku-table")
                  .rows[cul].cells[colstart].classList.add(
                    "sudoku-table__cell--wrong"
                  );
              }

            }
            temparr.splice(0, temparr.length);

            for (let x = 0; x <= refarr.length - 1; x++) {
              let bbb = refarr[x];
              temparr.push(bbb);
            }
          }
          temparr.splice(0, temparr.length);
          refarr.splice(0, refarr.length);
        }
      }

      /////////////////////////////////////
      for (let row = 0; row < 9; row++) {
        for (let colstart = 0; colstart < 1; colstart++) {
          let colend = colstart + 1;

          for (let colst = 0; colst < 9; colst++) {
            let val =
              document.querySelector(".sudoku-table").rows[colst].cells[row]
                .innerHTML;
            temparr.push(val ? parseInt(val) : 0);
            refarr.push(val ? parseInt(val) : 0);
          }

          console.log(temparr);
          console.log(refarr);

          for (let x = 0; x < 9; x++) {
            console.log("start array" + "" + temparr);

            let select = refarr[x];

            console.log(select);
            let findindex = refarr.indexOf(select);
            temparr.splice(findindex, 1);
            console.log("spliced" + "" + temparr);
            if (temparr.includes(select)) {
              console.log("alarm");
              let rrr = row + 1;
              // for (let rows = row ; rows < 9 ; rows++) {
              console.log("rowval" + row);
              for (let colstart = 0; colstart < 9; colstart++) {
                document
                  .querySelector(".sudoku-table")
                  .rows[colstart].cells[row].classList.add(
                    "sudoku-table__cell--wrong"
                  );
              }

            
            }
            temparr.splice(0, temparr.length);

            for (let x = 0; x <= refarr.length - 1; x++) {
              let bbb = refarr[x];
              temparr.push(bbb);
            }
          }
          temparr.splice(0, temparr.length);
          refarr.splice(0, refarr.length);
        }
      }

      //////////////////////////////////////////////////////////////////////////////////////

      for (let cul = 0; cul < 9; cul += 3) {
        for (let colstart = 0; colstart < 9; colstart += 3) {
          let colend = colstart + 1;

          let eee = cul + 3;
          let mmm = colstart + 3;
          for (let cup = cul; cup < eee; cup += 1) {
            for (let culst = colstart; culst < mmm; culst++) {
              let val =
                document.querySelector(".sudoku-table").rows[cup].cells[culst]
                  .innerHTML;
              temparr.push(val ? parseInt(val) : 0);
              refarr.push(val ? parseInt(val) : 0);
            }
          }

          console.log(temparr);
          console.log(refarr);

          for (let x = 0; x < 9; x++) {
            console.log("start array" + "" + temparr);

            let select = refarr[x];

            console.log(select);
            let findindex = refarr.indexOf(select);
            temparr.splice(findindex, 1);
            console.log("spliced" + "" + temparr);
            if (temparr.includes(select)) {
              console.log("alarm");
              let rrr = cul + 1;

              for (let cup = cul; cup < eee; cup += 1) {
                for (let culst = colstart; culst < mmm; culst++) {
                  for (let colstart = 0; colstart < 9; colstart++) {
                    document
                      .querySelector(".sudoku-table")
                      .rows[cup].cells[culst].classList.add(
                        "sudoku-table__cell--wrong"
                      );
                  }
                }
              }
            }

            temparr.splice(0, temparr.length);

            for (let x = 0; x <= refarr.length - 1; x++) {
              let bbb = refarr[x];
              temparr.push(bbb);
            }
          }
          temparr.splice(0, temparr.length);
          refarr.splice(0, refarr.length);
        }
      }

      ////////////////////////////////
    }
    /////////////////////////////////////







    const table = document.createElement("table");
    table.classList.add("sudoku-table");
    document.getElementsByClassName("sudoku-container")[0].appendChild(table);
    const initialField = [
      [4, 8, 1, 2, 5, 3, 6, 9, 7],
      [2, 6, 7, 9, 4, 8, 1, , 5],
      [5, 3, 9, 6, 7, 1, 2, , 4],
      [6, 5, 4, 3, 8, 9, 7, 1, 2],
      [9, , 8, 7, , 4, 5, 6, 3],
      [1, 7, 3, 5, 6, 2, 8, 4, 9],
      [7, , 2, 1, 3, 6, 9, 5, 8],
      [3, 1, 5, 8, 9, 7, 4, 2, 6],
      [8, 9, 6, 4, 2, 5, 3, 7, 1],
    ];
    for (let i = 0; i < initialField.length; i++) {
      const row = document.createElement("tr");
      row.classList.add("sudoku-table__row");
      table.appendChild(row);
      for (let j = 0; j < initialField[0].length; j++) {
        const cell = document.createElement("td");
        cell.classList.add("sudoku-table__cell");
        cell.contentEditable = true;
        cell.onkeyup = checkField;
        if (initialField[i][j]) {
          cell.innerHTML = initialField[i][j];
        }
        row.appendChild(cell);
      }
    }
  </script>
</html>
